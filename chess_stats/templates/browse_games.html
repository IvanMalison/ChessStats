<html ng-app="ChessStats">
  <head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src={{ get_static_url("js/lib/angular/angular.js") }}></script>
    <script src={{ get_static_url("js/lib/angular/angular-resource.js") }}></script>
    <script src={{ get_static_url("js/app.js") }}></script>
    <script src={{ get_static_url("js/services.js") }}></script>
    <script src={{ get_static_url("js/controllers.js") }}></script>
    <script src={{ get_static_url("js/filters.js") }}></script>
    <script src={{ get_static_url("js/directives.js") }}></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script src={{ get_static_url("js/navigation.js") }}></script> 
    <link rel="stylesheet" href={{
          get_static_url("bootstrap/css/bootstrap.min.css") }}
          type="text/css">
    <link rel="stylesheet" href={{
          get_static_url("css/base_styles.css") }}
          type="text/css"> 
    <link rel="stylesheet" href={{
          get_static_url("css/browse_games_styles.css") }}
          type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,300'
          rel='stylesheet' type='text/css'>

  </head>
  <body>
    <header>
      <div id="navigation">
        <div id="navigation-background"></div>
        <div class="links">
          <div class="histogram-link">
            <p><a href="../rating_graph/{{username}}">1</a></p>
            <div>
              <p>Rating Histogram</p>
            </div>
          </div>
          <div class="games-history-link">
            <p><a href="../browse_games/{{username}}">2</a></p>
            <div>
              <p>Game History</p>
            </div>
          </div>
          <div class="game-analysis-link">
            <p><a href="/rating_graph/{{username}}">3</a></p>
            <div>
              <p>Game Analysis</p>
            </div>
          </div>
          <div class="moves-stats-link" ng-class="navClass('movesStats')">
            <p><a href="../browse_moves/{{username}}">4</a></p>
            <div>
              <p>Moves Statistics</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div id="content">
      <div id="page-header" class="span10 center">
        <h2> <a href="../browse_moves/{{ username }}">{{ username
        }}</a> / <span id="page-title"> Game History</span></h2>
        <p><i class="icon-hand-right"></i> Select game id to view game analysis</p>
      </div>

    <div id="angular" ng-controller="GameBrowseCtrl" 
         ng-init="gameLoader.init('{{ username }}', '{{ port }}')")>
      <div class="row span10 center">
        <table id="game-table" class="game-table table table-striped table-bordered">
          <tr>
            <th>Date Played</th> 
            <th class="user-column">White Player</th>
            <th>White Elo</th>
            <th class="user-column">Black Player</th>
            <th>Black Elo</th>
            <th>Game ID</th>
          </tr>
          <tr ng-repeat="game in gameLoader.games" ng:fade="true">
            <td>[[game.date_played]]</td>
            <td class="user-column">
              <a href='[[game.white_username]]'>
	            <b ng-show="game.result ==
                 'W'"><img src="../static/img/crown_icon.svg" width="10%"></b>
                 [[game.white_username]]
              </a>
            </td>
            <td>[[game.white_elo]]</td>
            <td class="user-column">
              <a href='[[game.black_username]]'>
	            <b ng-show="game.result == 'B'"><img src="../static/img/crown_icon.svg" width="10%"></b>
                [[game.black_username]]
              </a>
            </td>
            <td>[[game.black_elo]]</td>
            <td><a href=[[gameLoader.buildChessDotComGameURL(game.id)]]
            target="_blank">[[game.id]]</a></td>
          </tr>
      </div>
    </div>
    </div>
  </body>
</html>
